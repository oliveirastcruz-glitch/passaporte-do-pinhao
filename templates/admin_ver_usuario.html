<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Visualizar Usuário</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap">
</head>
<body>
    <header class="header-principal">
        <div class="header-container">
            <div class="logo">
                <span class="logo-icone"><i class="fa-solid fa-tree"></i></span>
                <span class="logo-texto">Passaporte do Pinhão</span>
            </div>
            <nav>
                <ul>
                    <li><a href="/admin">Voltar ao Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <main style="max-width:700px;margin:40px auto;background:#fff;padding:32px;border-radius:12px;box-shadow:0 2px 12px #0001;">
        <h2>Dados do Usuário</h2>
        <div style="display:flex;align-items:center;gap:24px;">
            <img src="{{ usuario['foto'] or '/static/uploads/default-user.png' }}" alt="Foto do usuário" style="width:100px;height:100px;object-fit:cover;border-radius:8px;">
            <div>
                <p><strong>ID:</strong> {{ usuario['id'] }}</p>
                <p><strong>Nome:</strong> {{ usuario['nome'] }} {{ usuario['sobrenome'] }}</p>
                <p><strong>Email:</strong> {{ usuario['email'] }}</p>
                <p><strong>Telefone:</strong> {{ usuario['telefone'] }}</p>
                <p><strong>Cidade:</strong> {{ usuario['cidade'] }}</p>
                <p><strong>Estado:</strong> {{ usuario['estado'] }}</p>
                <p><strong>País:</strong> {{ usuario['pais'] }}</p>
                <p><strong>Data de Nascimento:</strong> {{ usuario['data_nascimento'] }}</p>
                <p><strong>Tipo:</strong> {{ usuario['tipo'] }}</p>
                <p><strong>CPF:</strong> {{ usuario['cpf'] }}</p>
                <p><strong>Sexo:</strong> {{ usuario['sexo'] }}</p>
            </div>
        </div>
        <form method="POST" action="/admin/usuario/excluir" style="margin-top:24px;" onsubmit="return confirm('Tem certeza que deseja excluir este usuário?');">
            <input type="hidden" name="usuario_id" value="{{ usuario['id'] }}">
            <button type="submit" style="color:#fff;background:#e74c3c;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:1rem;">Excluir Usuário</button>
        </form>
        <hr style="margin:32px 0;">
        <h3>Compras do Usuário</h3>
        {% if compras and compras|length > 0 %}
        <table border="1" style="width:100%;margin-bottom:24px;">
            <tr><th>ID</th><th>Data</th><th>Status</th></tr>
            {% for c in compras %}
            <tr>
                <td>{{ c[0] }}</td>
                <td>{{ c[1] }}</td>
                <td>{{ c[2] }}</td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
        <p style="color:#888;">Nenhuma compra encontrada.</p>
        {% endif %}
        <h3>Cupons do Usuário</h3>
        {% if cupons and cupons|length > 0 %}
        <table border="1" style="width:100%;">
            <tr><th>Código</th><th>Título</th><th>Descrição</th><th>Preço</th><th>Ativo</th></tr>
            {% for cupom in cupons %}
            <tr>
                <td>{{ cupom[0] }}</td>
                <td>{{ cupom[1] }}</td>
                <td>{{ cupom[2] }}</td>
                <td>R$ {{ '%.2f'|format(cupom[3]) }}</td>
                <td>{% if cupom[4] %}Sim{% else %}Não{% endif %}</td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
        <p style="color:#888;">Nenhum cupom encontrado.</p>
        {% endif %}
    </main>
    <footer>
        <p>&copy; 2025 Passaporte do Pinhão. Todos os direitos reservados.</p>
    </footer>
</body>
</html>
